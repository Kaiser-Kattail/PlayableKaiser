################################
#
# Exodus Events
#
###############################

namespace = flusion

event = {
	id = flusion.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_global_flag = pki_enabled
	}
}

country_event = {
	id = flusion.1001
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_origin = origin_katzen
	}

	immediate = {
		if = {
			limit = { NOT = { has_global_flag = pki_katzen_is_being_played } }
			set_global_flag = pki_katzen_is_being_played
			set_country_flag = pki_playable_kaiser
			country_event = { id = flusion.4 }
			country_event = { id = kaiser_bureau.0 days = 30 }
			every_country = {
				limit = { has_origin = origin_katzen NOT = { has_country_flag = pki_playable_kaiser} }
				capital_scope.solar_system = { set_star_flag = gigas_new_planets set_star_flag = pki_reset }
				giga_reset_ai_start = yes
				kill_leader = {
					ruler = yes
					show_notification = no
				}
				create_leader = {
					name = random
					species = owner_main_species
					class = official
					skill = 3
					randomize_traits = yes
					effect = {
						prev = {
							assign_leader = last_created_leader
						}
					}
				}
			}
		}
	}
}

planet_event = {
	id = flusion.3
	hide_window = yes
	is_triggered_only = yes

	pre_triggers = {
		has_owner = yes
	}

	trigger = {
		has_planet_flag = pki_flusion_planet
	}

	immediate = {
		if = {
			limit = {
				NOT = { is_planet_class = pc_pki_flusion_ecu }
				has_modifier = pki_flusion_ecu_modifier
			}
			remove_modifier = pki_flusion_ecu_modifier
		}
		if = {
			limit = { #solaktropa removed if ocean (duh)
				OR = {
					is_planet_class = pc_ocean
					habitable_planet = no
				}
				OR = {
					has_deposit = d_solaktropa_project
					has_deposit = d_solaktropa_project_wreck
					has_deposit = d_katlantropa_project
					has_deposit = d_katlantropa_project_wreck
				}
			}
			if = {
				limit = { has_deposit = d_solaktropa_project }
				remove_deposit = d_solaktropa_project
			}
			if = {
				limit = { has_deposit = d_solaktropa_project_wreck }
				remove_deposit = d_solaktropa_project_wreck
			}
			if = {
				limit = { has_deposit = d_katlantropa_project }
				remove_deposit = d_katlantropa_project
			}
			if = {
				limit = { has_deposit = d_katlantropa_project_wreck }
				remove_deposit = d_katlantropa_project_wreck
			}
		}
		if = {
			limit = { is_planet_class = pc_gaia }
			set_planet_entity = { entity = flusion_planet_gaia_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = { is_planet_class = pc_ocean }
			set_planet_entity = { entity = flusion_planet_ocean_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = { is_planet_class = pc_nuked }
			set_planet_entity = { entity = flusion_planet_nuked_entity }
			if = { limit = { has_modifier = pki_flusion_rich_modifier } remove_modifier = pki_flusion_rich_modifier }
		}
		else_if = {
			limit = { is_planet_class = pc_katzenland }
			set_planet_entity = { entity = flusion_planet_deserted_entity }
			if = { limit = { has_modifier = pki_flusion_rich_modifier } remove_modifier = pki_flusion_rich_modifier }
		}
		else_if = {
			limit = { is_planet_class = pc_city }
			set_planet_entity = { entity = flusion_planet_city_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = { is_planet_class = pc_giga_planetary_computer }
			set_planet_entity = { entity = flusion_planet_computer_entity}
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = { is_planet_class = pc_hive }
			set_planet_entity = { entity = flusion_planet_hive_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = { is_planet_class = pc_machine }
			set_planet_entity = { entity = flusion_planet_machine_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = { is_planet_class = pc_ll_foggy }
			set_planet_entity = { entity = flusion_planet_foggy_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = { is_planet_class = pc_ll_temperate }
			set_planet_entity = { entity = flusion_planet_lifeless_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = { is_planet_class = pc_ll_torrid }
			set_planet_entity = { entity = flusion_planet_torrid_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = { is_planet_class = pc_molten }
			set_planet_entity = { entity = flusion_planet_molten_entity }
			if = { limit = { has_modifier = pki_flusion_rich_modifier } remove_modifier = pki_flusion_rich_modifier }
		}
		else_if = {
			limit = { is_planet_class = pc_shrouded }
			set_planet_entity = { entity = flusion_planet_shrouded_entity }
			if = { limit = { has_modifier = pki_flusion_rich_modifier } remove_modifier = pki_flusion_rich_modifier }
		}
		else_if = {
			limit = { is_acot_awesome_planet_class = yes }
			set_planet_entity = { entity = flusion_planet_acot_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = {
				OR = {
					is_wet = yes
					is_planet_class = pc_tropical
					is_planet_class = pc_continental
				}
			}
			set_planet_entity = { entity = flusion_planet_entity }
			if = {
				limit = {
					NOT = { has_modifier = pki_flusion_rich_modifier }
				}
				add_modifier = { modifier = pki_flusion_rich_modifier days = -1 }
			}
		}
		else_if = {
			limit = {
				OR = {
					is_dry = yes
					is_planet_class = pc_desert
					is_planet_class = pc_arid
					is_planet_class = pc_savannah
				}
			}
			set_planet_entity = { entity = flusion_planet_desert_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = {
				OR = {
					is_cold = yes
					giga_is_frozen = yes
					is_planet_class = pc_arctic
					is_planet_class = pc_alpine
				}
			}
			set_planet_entity = { entity = flusion_planet_arctic_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
		}
		else_if = {
			limit = {
				OR = {
					is_planet_class = pc_shattered
					is_planet_class = pc_shattered_2
					is_planet_class = pc_broken
					giga_is_barren_cn = yes
					giga_is_frozen = yes
					giga_is_toxic = yes
				}
			}
			if = { limit = { has_modifier = pki_flusion_rich_modifier } remove_modifier = pki_flusion_rich_modifier }
		}
		if = {
			limit = { is_planet_class = pc_pki_flusion_ecu }
			set_planet_entity = { entity = flusion_planet_ecugaia_01_entity }
			if = { limit = { NOT = { has_modifier = pki_flusion_rich_modifier } } add_modifier = { modifier = pki_flusion_rich_modifier days = -1 } }
			if = {
				limit = { has_deposit = d_solaktropa_project_wreck }
				remove_deposit = d_solaktropa_project_wreck
				add_deposit = d_solaktropa_project
			}
			if = {
				limit = { has_deposit = d_katlantropa_project_wreck }
				remove_deposit = d_katlantropa_project_wreck
				add_deposit = d_katlantropa_project
			}
			if = { limit = { NOT = { has_modifier = pki_flusion_ecu_modifier } } add_modifier = { modifier = pki_flusion_ecu_modifier days = -1 } }
		}
	}
}

country_event = {
	id = flusion.4
	hide_window = yes

	is_triggered_only = yes

	trigger = {
		exists = this
		has_global_flag = pki_player_katzen
		pki_is_katzenartig_imperium = yes
	}

	immediate = {
		set_country_flag = starting_event
		save_global_event_target_as = pki_player
		save_global_event_target_as = pki_KAT_country
        set_global_flag = pki_katzen_is_being_played
		owner_main_species = {
			save_global_event_target_as = pki_katzen_species
		}

		#	#DOCS

		#	begin_event_chain = {
		#		event_chain = kaiser_docs_chain
		#	}

		#	create_point_of_interest = {
		#		id = kaiser_docs_chain.1
		#		name = "kaiser_docs_1"
		#		desc = "kaiser_docs_1_desc"
		#		event_chain = "kaiser_docs_chain"
		#		location = capital_scope
		#	}

		#	create_point_of_interest = {
		#		id = kaiser_docs_chain.2
		#		name = "kaiser_docs_2"
		#		desc = "kaiser_docs_2_desc"
		#		event_chain = "kaiser_docs_chain"
		#		location = capital_scope
		#	}

		#	create_point_of_interest = {
		#		id = kaiser_docs_chain.3
		#		name = "kaiser_docs_3"
		#		desc = "kaiser_docs_3_desc"
		#		event_chain = "kaiser_docs_chain"
		#		location = capital_scope
		#	}

		#	create_point_of_interest = {
		#		id = kaiser_docs_chain.4
		#		name = "kaiser_docs_4"
		#		desc = "kaiser_docs_4_desc"
		#		event_chain = "kaiser_docs_chain"
		#		location = capital_scope
		#	}

		# END DOCS

		set_country_flag = pki_hasnt_used_ehve

		if = {
			limit = {
				has_first_contact_dlc = no
			}
			add_modifier = {
				modifier = pki_no_ftl_capability
				days = -1
			}
		}

		add_modifier = {
			modifier = pki_destabilized_government
			days = -1
		}

		add_modifier = {
			modifier = pki_pre_ftl_military_1
			days = -1
		}

		# Win prevention for "cinematic" ending
		event_target:global_event_country = {
			create_country = {
				name = "PKI Win Prevention Country"
				type = default
				contact_rule = never
				auto_delete = no
				name_list = random
				authority = random
				civics = random
				origin = origin_default
				species = event_target:katzenartig
				set_capital_from_species = no
				randomize_ethos = yes
				effect = {
					set_country_flag = pki_win_prevention_country
					save_global_event_target_as = pki_win_prevention_country
				}
			}
		}

		#Leader Portraits
		create_species = {
			name = "Imperial Katzen"
			plural = "Imperial Katzens"
			class = Flusionian
			portrait = Kattail_1
			homeworld = event_target:pki_flusion_planet
			traits = {
				trait = trait_pc_continental_preference
				trait = trait_quick_learners
				trait = trait_talented
				trait = trait_venerable
			}

			effect = {
				set_global_flag = kaiser_portrait_defined
				save_global_event_target_as = pki_kaiser_portrait_hd
			}
		}

		#Here comes funny kaiser
		create_species = {
			name = "Imperial Katzen"
			plural = "Imperial Katzens"
			class = Flusionian
			portrait = kaiser
			homeworld = event_target:pki_flusion_planet
			traits = {
				trait = trait_pc_continental_preference
				trait = trait_quick_learners
				trait = trait_talented
				trait = trait_venerable
			}
			effect = {
				set_global_flag = kaiser_portrait_defined
				save_global_event_target_as = pki_kaiser_portrait_pvz
			}
		}

		#Make the soulbot species
		create_species = {
			name = "Soulbot"
			plural = "Soulbots"
			class = ROBOT
			portrait = default_robot
			traits = {
				trait = trait_mechanical
				trait = trait_robot_enhanced_memory
				trait = trait_robot_learning_algorithms
				trait = trait_robot_luxurious
				trait = trait_robot_custom_made
			}
			effect = {
				save_global_event_target_as = pki_soulbot_species
			}
		}

		pki_create_flusion_nations = yes

		create_country = {
			name = "NAME_katzen_warforge"
			type = pki_katzen_ship
			auto_delete = no
			use_hostilities_from = root
			flag = {
				icon = {
					category = "domination"
					file = "domination_8.dds"
				}
				background = {
					category = "backgrounds"
					file = "v.dds"
				}
				colors = {
					"blue"
					"indigo"
					"null"
					"null"
				}
			}
			effect = {
				establish_communications_no_message = root
				set_faction_hostility = {
					target = root
					set_hostile = no
					set_neutral = no
					set_friendly = yes
				}
				save_global_event_target_as = pki_warforge_country
			}
		}

		#Setup Flusion
		capital_scope = {
			set_planet_size = 16
			clear_blockers = yes
			clear_deposits = yes
			remove_all_districts = yes
			remove_all_buildings = yes

			add_district = district_city
			add_district = district_farming
			add_district = district_industrial
			add_district = district_generator
			add_district = district_mining

			add_building = building_capital
			add_building = building_capital
			add_building = building_stronghold

			add_deposit = d_pki_katown

			add_deposit = d_pki_KAT

			add_deposit = d_pki_flusion_nations



			while = {
				count = 9
				random_owned_pop = {
					limit = {
						is_pop_category = specialist
					}
					kill_pop = yes
				}
			}

			if = {
				limit = {
					NOT = {
						root = {
							OR = {
								has_valid_civic = civic_eager_explorers
								has_valid_civic = civic_privatized_exploration
								has_valid_civic = civic_hive_stargazers
								has_valid_civic = civic_machine_exploration_protocol
							}
						}
					}
				}
				while = {
					count = 10
					random_owned_pop = {
						limit = {
							is_pop_category = specialist
						}
						kill_pop = yes
					}
				}
			}
		}

		every_owned_ship = {
			unassign_leader = this
			delete_ship = this
		}

		capital_scope = {
			solar_system = {
				create_starbase = {
					owner = root
					size = starbase_outpost
				}
			}
		}

		every_owned_ship = {
			limit = {
				OR = {
					is_ship_size = mining_station
					is_ship_size = research_station
				}
			}
			delete_ship = this
		}

		set_country_flag = pki_map_KAT_selected
		set_country_flag = pki_conquest_map_tab

		pki_set_army_limits = yes
		pki_refresh_all_army_limits = yes

		pki_setup_flusion_economy = yes

		event_target:pki_jublio_system = {
			spawn_system = {
				max_distance = 4
				min_distance = 5
				initializer = pki_jupitwo_initializer
			}
			last_created_system = {
				# Add extra hyperlane
				random_list = {
					1 = {
						while = {
							count = 1
							giga_generate_hyperlane = {
								TRIGGER = " pki_is_allowed_for_kaiser_spawn = yes "
							}
						}
					}
					1 = {
						while = {
							count = 2
							giga_generate_hyperlane = {
								TRIGGER = " pki_is_allowed_for_kaiser_spawn = yes "
							}
						}
					}
				}
			}
		}
		if = {
			limit = {
				has_origin = origin_katzen
				NOT = {
					has_country_flag = kaiser_preset
				}
			}
			country_event = {
				id = flusion.44
			}
		}

		country_event = { id = flusion.41 }
		country_event = { id = pki_menu.0 days = 30 }
	}
}

event = {
	id = flusion.42
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_global_flag = kaiser_is_player
		set_global_flag = katzenartig_disabled
		set_global_flag = giga_jublio_disabled
		set_global_flag = giga_jupitwo_disabled
		set_global_flag = giga_fe_pouchkinn_disabled
	}
}

country_event = {
	id = flusion.41
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		every_owned_leader = {
			limit = {
				is_ruler = no
			}
			kill_leader = { show_notification = no }
		}

		create_leader = {
			class = scientist
			species = owner_main_species
			name = "NAME_Pawlbert"
			gender = male
			skill = 3
			immortal = yes
			traits = {
				trait = pki_katzen_trait_elite
				trait = leader_trait_spark_of_genius
				trait = subclass_scientist_councilor
			}
			effect = {
				set_council_position = councilor_research
			}
		}

		#Create Pawtton
		create_leader = {
			class = commander
			species = owner_main_species
			name = "Meorge Pawtton"
			gender = male
			skill = 3
			immortal = yes
			traits = {
				trait = pki_katzen_trait_elite
				trait = pki_leader_trait_nukelad
				trait = subclass_commander_general
			}
			effect = {
				set_leader_flag = pawtton
				save_global_event_target_as = pawtton
				clear_global_event_target = kaiser_portrait
			}
		}

			#Create Loris
			create_leader = {
				class = official
				species = owner_main_species
				name = "Loris Von Kattensbach"
				gender = male
				skill = 3

				immortal = yes
				traits = {
					trait = pki_katzen_trait_elite
					trait = leader_trait_architectural_interest
					trait = leader_trait_army_veteran
					trait = subclass_official_governor
				}
                background_planet = event_target:pki_flusion_planet
                background_job = politician
                background_ethic = ethic_materialist
				effect = {
					change_leader_portrait = lorisvanilla
					set_leader_flag = pki_leader_douclaw
					save_global_event_target_as = pki_leader_douclaw
					set_council_position = councilor_state
                    event_target:pki_flusion_planet = {
                        assign_leader = prev
                    }
				}
			}

		#Create Douclaw
		create_leader = {
			class = commander
			species = owner_main_species
			name = "Douclaw MacCathur"
			gender = male
			skill = 3
			immortal = yes
			set_age = 57
			traits = {
				trait = pki_katzen_trait_elite
				trait = pki_leader_trait_armored_warfare
				trait = pki_leader_trait_nukelad
				trait = subclass_commander_admiral
			}
			custom_description = PKI_DOUCLAW_DESC
			background_planet = event_target:pki_flusion_planet
			background_job = soldier
			background_ethic = ethic_materialist
			effect = {
				change_leader_portrait = douclaw
				set_leader_flag = pki_leader_douclaw
				save_global_event_target_as = pki_leader_douclaw
				set_council_position = councilor_defense
			}
		}
	}
}

country_event = {
	id = flusion.42
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		pki_is_katzenartig_imperium = yes
	}

	immediate = {
		set_global_flag = pki_katzen_is_being_played
		set_global_flag = katzenartig_disabled
		set_global_flag = giga_jublio_disabled
		set_global_flag = giga_jupitwo_disabled
		set_global_flag = giga_fe_pouchkinn_disabled
	}
}

event = {
	id = flusion.43
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_playable_country = {
			limit = {
				pki_is_katzenartig_imperium = yes
				NOT = {
					has_country_flag = kaiser_preset
				}
			}
			country_event = { id = flusion.44 }
		}
	}
}

country_event = {
	id = flusion.44
	title = flusion.44.name
	desc = flusion.44.desc
	picture = GFX_no_preset
	show_sound = event_assembly_fight
	is_triggered_only = yes

	option = {
		name = "flusion.44.a"
	}
}

namespace = katzen

#Katzen elite to soulbot
country_event = {
	id = katzen.3
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = {
			#Must be recruited
			NOT = { 
				prev = { 
					any_pool_leader = { 
						is_same_value = prevprev 
					} 
				} 
			}
			#Can't be a soulbot
			NOT = {
				has_leader_flag = pki_is_soulbot
			}
			#Must be elite
			has_trait = pki_katzen_trait_elite
			#Must own Solakia
			has_global_flag = solakia_conquered 
		}
	}

	immediate = {
		clone_leader = { 
			target = from
			species = event_target:pki_soulbot_species
			effect = {
			set_leader_flag = pki_is_soulbot
			change_leader_portrait = species
			}
		}
	}
}

#Keep Douclaw and Loris looking correct
country_event = {
	id = katzen.4
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		this = {
			pki_is_katzenartig_imperium = yes
		}
	}
	immediate = {
		random_owned_leader = {
			limit = {
				has_leader_flag = loris
				NOT = {
					has_leader_flag = soulbot
				}
			}
			if = {
				limit = {
					has_global_flag = silly_flusionian_portraits_enabled
				}
				change_leader_portrait = lorisreal
			}
			if = {
				limit ={
					NOT = {
						has_global_flag = silly_flusionian_portraits_enabled
					}
				}
				change_leader_portrait = loris
			}
		}
		random_owned_leader = {
			limit = {
				has_leader_flag = douclaw
				NOT = {
					has_leader_flag = soulbot
				}
			}
			if = {
				limit = {
					has_global_flag = silly_flusionian_portraits_enabled
				}
				change_leader_portrait = douclawreal
			}
			if = {
				limit ={
					NOT = {
						has_global_flag = silly_flusionian_portraits_enabled
					}
				}
				change_leader_portrait = douclaw
			}
		}
	}
}

#Set lore acurate looks (if applicable)
country_event = {
	id = katzen.6
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		this = {
			pki_is_katzenartig_imperium = yes
		}
		has_global_flag = silly_flusionian_portraits_enabled
	}
	immediate = {
		random_owned_leader = {
			limit = {
				has_leader_flag = loris
			}
			change_leader_portrait = lorisreal
		}
		random_owned_leader = {
			limit = {
				has_leader_flag = douclaw
			}
			change_leader_portrait = douclawreal
		}
	}
}

#Give leader elite trait part 1
country_event = {
	id = katzen.7
	is_triggered_only = yes
	title = "katzen.7.name"
	desc = "katzen.7.desc"
	trigger = {
		this = {
			pki_is_katzenartig_imperium = yes
		}
	}
	#Governors
	option = {
		name = "katzen.7.a"
		allow = {
			custom_tooltip = {
				fail_text = pki_must_have_valid_elite_governor
				any_owned_leader = {
					leader_class = official
					NOT = {
						has_trait = pki_katzen_trait_elite
					}
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = katzen.8
			}
		} 
	}
	#Scientists
	option = {
		name = "katzen.7.b"
		allow = {
			custom_tooltip = {
				fail_text = pki_must_have_valid_elite_scientist
				any_owned_leader = {
					leader_class = scientist
					NOT = {
						has_trait = pki_katzen_trait_elite
					}
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = katzen.9
			}
		} 
	}
	#Admirals
	option = {
		name = "katzen.7.c"
		allow = {
			custom_tooltip = {
				fail_text = pki_must_have_valid_elite_admiral
				any_owned_leader = {
					leader_class = commander
					NOT = {
						has_trait = pki_katzen_trait_elite
					}
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = katzen.10
			}
		} 
	}
	
	option = { # Exit
		default_hide_option = yes
		name = "katzen.7.e"
	}
}

#Make Elite governor
country_event = {
	id = katzen.8
	title = "katzen.8.name"
	desc = "katzen.8.desc"
	is_triggered_only = yes

	immediate = {
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = official
			}
			save_event_target_as = leader_1
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = official
				NOT = { is_same_value = event_target:leader_1 }
			}
			save_event_target_as = leader_2
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = official
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
			}
			save_event_target_as = leader_3
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = official
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
			}
			save_event_target_as = leader_4
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = official
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
				NOT = { is_same_value = event_target:leader_4 }
			}
			save_event_target_as = leader_5
		}
	}
	option = {
		name = "katzen.8.a"
		event_target:leader_1 = {
			add_trait = pki_katzen_trait_elite
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.b"
		event_target:leader_2 = {
			add_trait = pki_katzen_trait_elite
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		trigger = {
			exists = event_target:leader_2
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.c"
		event_target:leader_3 = {
			add_trait = pki_katzen_trait_elite
		}
		trigger = {
			exists = event_target:leader_3
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}

	option = {
		name = "katzen.8.d"
		event_target:leader_4 = {
			add_trait = pki_katzen_trait_elite
		}
		trigger = {
			exists = event_target:leader_4
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.e"
		event_target:leader_5 = {
			add_trait = pki_katzen_trait_elite
		}
		trigger = {
			exists = event_target:leader_5
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}


	option = { # Back
		default_hide_option = yes
		name = "katzen.8.f"
		hidden_effect = {
			country_event = {
				id = katzen.7
			}
		}
	}
}


#Make Elite scientist
country_event = {
	id = katzen.9
	title = "katzen.9.name"
	desc = "katzen.9.desc"
	is_triggered_only = yes

	immediate = {
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = scientist
			}
			save_event_target_as = leader_1
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = scientist
				NOT = { is_same_value = event_target:leader_1 }
			}
			save_event_target_as = leader_2
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = scientist
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
			}
			save_event_target_as = leader_3
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = scientist
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
			}
			save_event_target_as = leader_4
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = scientist
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
				NOT = { is_same_value = event_target:leader_4 }
			}
			save_event_target_as = leader_5
		}
	}
	option = {
		name = "katzen.8.a"
		event_target:leader_1 = {
			add_trait = pki_katzen_trait_elite
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.b"
		event_target:leader_2 = {
			add_trait = pki_katzen_trait_elite
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		trigger = {
			exists = event_target:leader_2
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.c"
		event_target:leader_3 = {
			add_trait = pki_katzen_trait_elite
		}
		trigger = {
			exists = event_target:leader_3
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}

	option = {
		name = "katzen.8.d"
		event_target:leader_4 = {
			add_trait = pki_katzen_trait_elite
		}
		trigger = {
			exists = event_target:leader_4
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.e"
		event_target:leader_5 = {
			add_trait = pki_katzen_trait_elite
		}
		trigger = {
			exists = event_target:leader_5
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}


	option = { # Back
		default_hide_option = yes
		name = "katzen.8.f"
		hidden_effect = {
			country_event = {
				id = katzen.7
			}
		}
	}
}


#Make Elite admiral
country_event = {
	id = katzen.10
	title = "katzen.10.name"
	desc = "katzen.10.desc"
	is_triggered_only = yes

	immediate = {
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = commander
			}
			save_event_target_as = leader_1
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = commander
				NOT = { is_same_value = event_target:leader_1 }
			}
			save_event_target_as = leader_2
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = commander
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
			}
			save_event_target_as = leader_3
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = commander
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
			}
			save_event_target_as = leader_4
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = pki_katzen_trait_elite
					has_trait = pki_leader_trait_ruler_kaiser_kattail
				}
				leader_class = commander
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
				NOT = { is_same_value = event_target:leader_4 }
			}
			save_event_target_as = leader_5
		}
	}
	option = {
		name = "katzen.8.a"
		event_target:leader_1 = {
			add_trait = pki_katzen_trait_elite
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.b"
		event_target:leader_2 = {
			add_trait = pki_katzen_trait_elite
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		trigger = {
			exists = event_target:leader_2
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.c"
		event_target:leader_3 = {
			add_trait = pki_katzen_trait_elite
		}
		trigger = {
			exists = event_target:leader_3
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}

	option = {
		name = "katzen.8.d"
		event_target:leader_4 = {
			add_trait = pki_katzen_trait_elite
		}
		trigger = {
			exists = event_target:leader_4
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.e"
		event_target:leader_5 = {
			add_trait = pki_katzen_trait_elite
		}
		trigger = {
			exists = event_target:leader_5
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}


	option = { # Back
		default_hide_option = yes
		name = "katzen.8.f"
		hidden_effect = {
			country_event = {
				id = katzen.7
			}
		}
	}
}